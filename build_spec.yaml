version: 0.1
component: build
timeoutInSeconds: 6000
runAs: root
shell: bash
env:
  # these are local variables to the build config
  variables:
    code_repo_name: "buildRunner_OnInstance"

steps:
  - type: Command
    name: "Commands to Object Storage"
    timeoutInSeconds: 40
    command: |
      cd ${OCI_WORKSPACE_DIR}/${code_repo_name}
      echo "hostname;date">sample_command.txt
      oci os object put --namespace ${OBJECT_STORE_NAMESPACE} --bucket-name ${OBJECT_STORE_BUCKET_NAME} --file sample_command.txt --no-multipart --force

  - type: Command
    name: "Running commands from BR "
    timeoutInSeconds: 40
    command: |
      oci os ns get 
      oci instance-agent command get --command-id ${COMMAND_OCID}
      oci instance-agent command-execution list --compartment-id ${COMPARTMENT_OCID} --instance-id ${INSTANCE_OCID}


      
